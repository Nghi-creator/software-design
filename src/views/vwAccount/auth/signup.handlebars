{{#section 'js'}}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script src="/static/js/auth/signup.js"></script>
{{/section}}

{{#> auth-wrapper title="Sign up" subtitle="Create an account to join the online auction."}}
<form method="post" action="/account/signup" id="formSignup">

  <!-- Full name -->
  <div class="mb-3">
    <label for="fullname" class="form-label text-uppercase small">Full name</label>
    <input type="text" class="form-control {{#if errors.fullname}}is-invalid{{/if}}" id="fullname" name="fullname"
      placeholder="Nguyen Van B" value="{{old.fullname}}"> <!-- Giữ lại value -->
    {{#if errors.fullname}}
    <div class="invalid-feedback">{{errors.fullname}}</div>
    {{/if}}
  </div>

  <!-- Address -->
  <div class="mb-3">
    <label for="address" class="form-label text-uppercase small">Address</label>
    <input type="text" class="form-control {{#if errors.address}}is-invalid{{/if}}" id="address" name="address"
      placeholder="123, Street, District, City" value="{{old.address}}"> <!-- Giữ lại value -->
    {{#if errors.address}}
    <div class="invalid-feedback">{{errors.address}}</div>
    {{/if}}
  </div>

  <!-- Email -->
  <div class="mb-3">
    <label for="email" class="form-label text-uppercase small">Email</label>
    <input type="email" class="form-control {{#if errors.email}}is-invalid{{/if}}" id="email" name="email"
      placeholder="you@example.com" value="{{old.email}}">
    {{#if errors.email}}
    <div class="invalid-feedback">{{errors.email}}</div>
    {{else}}
    <div class="form-text">
      Email must be unique. We will send an OTP to verify your account.
    </div>
    {{/if}}
  </div>

  <!-- Password: ĐÃ XÓA value="{{old.password}}" -->
  <div class="mb-3">
    <label for="password" class="form-label text-uppercase small">Password</label>
    <input type="password" class="form-control {{#if errors.password}}is-invalid{{/if}}" id="password" name="password"
      placeholder="Enter your password">
    {{#if errors.password}}
    <div class="invalid-feedback">{{errors.password}}</div>
    {{/if}}
  </div>

  <!-- Confirm Password: ĐÃ XÓA value="{{old.confirmPassword}}" -->
  <div class="mb-3">
    <label for="confirmPassword" class="form-label text-uppercase small">Confirm password</label>
    <input type="password" class="form-control {{#if errors.confirmPassword}}is-invalid{{/if}}" id="confirmPassword"
      name="confirmPassword" placeholder="Re-enter your password">
    {{#if errors.confirmPassword}}
    <div class="invalid-feedback">{{errors.confirmPassword}}</div>
    {{/if}}
  </div>

  <!-- reCAPTCHA -->
  <div class="mb-3">
    <label class="form-label text-uppercase small d-block">Verification</label>
    <div>
      <!-- Đảm bảo biến recaptchaSiteKey được truyền từ Controller -->
      <div class="g-recaptcha" data-sitekey="{{recaptchaSiteKey}}"></div>
      {{#if errors.captcha}} <!-- Hiển thị lỗi captcha từ server nếu có -->
      <div class="text-danger small mt-1">{{errors.captcha}}</div>
      {{/if}}
    </div>
  </div>

  <!-- Submit -->
  <div class="d-grid">
    <button type="submit" class="btn btn-dark text-uppercase">Sign up</button>
  </div>

  <div class="mt-3 text-center">
    <span class="text-muted small">
      Already have an account? <a href="/account/signin" class="text-decoration-none">Sign in</a>
    </span>
  </div>
</form>
{{/auth-wrapper}}